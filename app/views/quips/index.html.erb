<script>
    function prepare_hovers() {
        var old_plus = $('addnew_plus').getStyle('color');
        var old_O = $('random_O').getStyle('color');
        $('addnew').observe('mouseover', function() {
            $('addnew_plus').setStyle({
                color: '#007711',
            });
        });
        $('addnew').observe('mouseout', function() {
            $('addnew_plus').setStyle({
                color: old_plus,
            });
        });
        $('random').observe('mouseover', function() {
            $('random_O').setStyle({
                color: '#001177',
            });
        });
        $('random').observe('mouseout', function() {
            $('random_O').setStyle({
                color: old_O,
            });
        });
    }

    document.observe("dom:loaded", function() {
        prepare_hovers();
    });
</script>

<div style="position:relative">
  <div id="sort_options">
      <a id="<%="selected_sort" if params[:sort]=="votes"%>" href="quips?sort=votes">Highest Rated</a>
      <a id="<%="selected_sort" if params[:sort]=="date" && params[:direction]==nil%>"href="quips?sort=date">Newest</a>
      <a id="<%="selected_sort" if params[:sort]=="date" && params[:direction]=="asc"%>"href="quips?sort=date&direction=asc">Oldest</a>
  </div>
  <% if @quips.length > 0 %>
    <% for quip in @quips %>
        <div class="quip">
            <span style="font-family: monospace;">
                <%= link_to "\##{quip.id}", quip %>
                <span id=<%=h "plus#{quip.id}"%>>
                  <!-- The following ugliness is due to newlines generating spaces for no reason.
                  Damn you mozilla. -->
                <%= link_to_remote "+", 
                    :url => vote_url(quip.id, :type => "up"),
                    :update => "vote_#{quip.id}",
                    :loading => "$('plus#{quip.id}').update('+');$('minus#{quip.id}').update('-');"%></span>(<span id="vote_<%=quip.id%>"><%=h quip.votes %></span>)<span id=<%=h "minus#{quip.id}"%>><%= link_to_remote "-", 
                    :url => vote_url(quip.id, :type => "down"),
                    :update => "vote_#{quip.id}",
                    :loading => "$('minus#{quip.id}').update('-');$('plus#{quip.id}').update('+');"%>
                </span>
            </span>
            <div class="quip_text">
                <%=simple_format(html_escape(quip.quip)) %>
            </div>
        </div>
    <% end %>
    <%= will_paginate @quips %>
  <% else %>
    No quotes entered.
  <% end %>
</div>

